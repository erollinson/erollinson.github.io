---
title: "A summary of the cats supervising Botany 2021 (#CatsOfBotany)"
author: "E.J. Rollinson"
output:
  html_document:
    toc: yes
  pdf_document:
    toc: yes
editor_options: 
  chunk_output_type: console
---  

```{r, echo=FALSE, results='hide', message=FALSE, warning=FALSE}

library(extrafont)
#extrafont::loadfonts(device="win") #run once to import fonts; code below assumes Open Sans installed locally
library(dplyr)
library(knitr)
library(tidyr)
#library(devtools) #uncomment these two lines if tweetrmd needs to be installed
#devtools::install_github("gadenbuie/tweetrmd")
library(tweetrmd)
library(htmltools)
library(purrr)
library(stringr)

#The comments below show how to use rtweet to download Twitter data. You will need to create an app at https://dev.twitter.com/ to get Twitter API OAuth values that fill into the spaces indicated below. This code needs to run to generate the csv used in creating this document, but should be commented out to knit the final product.

#load libraries
library(rtweet)
library(tidyverse)
library(lubridate)
library(tidytext)


# #pass your keys to API
# appname <- "YourAppName"
# key <- "YourKey"
# secret <- "YourSecretKey"
# access_token <- "YourAccessToken"
# access_secret <- "YourSecretAccessToken"
# 
# twitter_token <-create_token(
#   app = appname,
#   consumer_key = key,
#   consumer_secret = secret,
#   access_token = access_token,
#   access_secret = access_secret)

# save tweets to csv - uncomment to search & save tweets; comment out to knit HTML document

# there is a limit to how many tweets can be returned, and also how far back in time the Twitter API will search - to save tweets for a long event, I recommend running this search and saving new files regularly, and compiling them all at the end - the compiled csv can then be reimported below - see tweetscrape_blank.Rmd in same GitHub project

# tweets<-search_tweets(q = "#CatsOfBotany", n=10000, retryonratelimit = TRUE)
# save_as_csv(tweets, "CatsOfBotany.csv")
# 

#import csv of tweets 

dt_tweets <- read.csv("CatsOfBotany_7_24am.csv", stringsAsFactors = FALSE)
dt_tweets$created_at <- as.Date(dt_tweets$created_at)

startdate <- "2021-07-18 08:55:00"
enddate <- "2021-07-24 09:00:00"

confcats <- dt_tweets %>%
  filter(created_at > as.POSIXct(startdate, tz="America/New_York"), created_at < as.POSIXct(enddate, tz="America/New_York"))

uniques <- confcats %>%
  arrange(desc(created_at)) %>%
  filter(is_retweet=="FALSE" & is_quote=="FALSE")

```

## About this document
These are the cats of #Botany2021!
 
Tweets using the hashtag #CatsOfBotany were aggregated from Twitter using the R package [rtweet](https://cran.r-project.org/web/packages/rtweet/index.html) and the Twitter API.

This document was generated using RMarkdown, and the source is [available on GitHub](https://github.com/erollinson/erollinson.github.io).

This document (and associated code) is released under a CC0 license.

Were you looking for the rest of the tweet stats? [Those are here.](https://erollinson.github.io/Botany2021tweets)




## The cat parade

```{r cats, echo=FALSE, results='asis', warning=FALSE}

htmltools::tagList(lapply(uniques$status_url, tweet_embed, plain=FALSE, dnt=TRUE))

```

-----

<p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
  <a rel="license"
     href="https://creativecommons.org/share-your-work/public-domain/cc0/">
    <img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0" />
  </a>
  <br />
  To the extent possible under law,
  <a rel="dct:publisher"
     href="https://github.com/erollinson/erollinson.github.io">
    <span property="dct:title">Emily J. Rollinson</span></a>
  has waived all copyright and related or neighboring rights to
  <span property="dct:title">Summary of tweets at Botany 2021</span>.
This work is published from:
<span property="vcard:Country" datatype="dct:ISO3166"
      content="US" about="https://github.com/erollinson/erollinson.github.io">
  United States</span>.
</p>

